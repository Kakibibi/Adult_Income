<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UCI Adult Income Dataset - Exploratory and Descriptive Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Data Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Data Analysis_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Data Analysis_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Data Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Data Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Data Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Data Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Data Analysis_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Data Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Data Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Data Analysis_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">UCI Adult Income Dataset - Exploratory and Descriptive Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this notebook, we carry out an in-depth exploratory and descriptive analysis of the UCI Adult Income Dataset, a widely used dataset for income prediction tasks based on individual demographic and employment attributes.</p>
<p>This phase of analysis is essential for uncovering patterns, detecting potential biases, and gaining intuition about the dataset’s structure before applying any modelling procedures. We examine the distribution of key numerical and categorical variables, investigate relationships between demographic features and income levels, and use visualizations to summarize insights. Particular focus is placed on income disparities across <strong>age groups</strong>, <strong>geographical regions</strong>, <strong>races</strong>, and <strong>education-occupation combinations</strong>, helping lay a solid foundation for downstream modeling and policy-relevant interpretation.</p>
<p>We begin our analysis by importing the core Python libraries required for <strong>data handling</strong>, <strong>numerical computation</strong>, <strong>visualization</strong>, and <strong>directory management</strong>:</p>
<ul>
<li><p><code>pandas</code>: Enables efficient manipulation, filtering, and aggregation of structured tabular data, forming the backbone of our analysis pipeline.</p></li>
<li><p><code>numpy</code>: Provides support for fast numerical operations, array-based computation, and statistical routines.</p></li>
<li><p><code>os</code>: Facilitates interaction with the file system, allowing us to construct flexible and portable directory paths for data and output management.</p></li>
<li><p><code>plotly.express</code>: A high-level graphing library that enables the creation of interactive, publication-quality visualizations, which we use extensively to uncover patterns and present insights throughout the notebook.</p></li>
</ul>
<div id="6bad0e92-f7ba-4f76-8831-d0b1648ead7e" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="define-and-create-directory-paths" class="level2">
<h2 class="anchored" data-anchor-id="define-and-create-directory-paths">Define and Create Directory Paths</h2>
<p>To ensure reproducibility andorganized storage, we programmatically create directories if they don’t already exist for:</p>
<ul>
<li><strong>raw data</strong></li>
<li><strong>processed data</strong></li>
<li><strong>results</strong></li>
<li><strong>documentation</strong></li>
</ul>
<p>These directories will store intermediate and final outputs for reproducibility.</p>
<div id="f2c00d47-b584-4d07-ac6a-c02d659bef68" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get working directory </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>current_dir <span class="op">=</span> os.getcwd()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># go to directory up to the root directory</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>project_root_dir <span class="op">=</span> os.path.dirname(current_dir)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define paths to the data folders </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>data_dir <span class="op">=</span> os.path.join(project_root_dir, <span class="st">'data'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>raw_dir <span class="op">=</span> os.path.join(data_dir, <span class="st">'raw'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>processed_dir <span class="op">=</span> os.path.join(data_dir, <span class="st">'processed'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Define paths to the data folders</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>result_dir <span class="op">=</span> os.path.join(project_root_dir, <span class="st">'result'</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define paths to docs folderabs</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>docs_dir <span class="op">=</span> os.path.join(project_root_dir, <span class="st">'docs'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># create directories if the do not eFile exists</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>os.makedirs(raw_dir, exist_ok <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>os.makedirs(processed_dir, exist_ok <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>os.makedirs(result_dir, exist_ok <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>os.makedirs(docs_dir, exist_ok <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="loading-the-cleaned-dataset" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-cleaned-dataset">Loading the Cleaned Dataset</h2>
<p>We load the cleaned version of the UCI Adult Income Dataset from the processed data directory into a Pandas DataFrame. The <code>head(10)</code> function shows the first ten records, giving a glimpse into the data columns such as <code>age</code>, <code>workclass</code>, <code>education_num</code>, etc.</p>
<div id="25ed7035-16aa-40a1-a90b-d3bd1a5eaa34" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>adult_data_filename <span class="op">=</span> os.path.join(processed_dir, <span class="st">"adult_cleaned.csv"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>adult_df <span class="op">=</span> pd.read_csv(adult_data_filename)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>adult_df.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">workclass</th>
<th data-quarto-table-cell-role="th">fnlwgt</th>
<th data-quarto-table-cell-role="th">education_num</th>
<th data-quarto-table-cell-role="th">marital_status</th>
<th data-quarto-table-cell-role="th">relationship</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">capital_gain</th>
<th data-quarto-table-cell-role="th">capital_loss</th>
<th data-quarto-table-cell-role="th">hours_per_week</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">education_level</th>
<th data-quarto-table-cell-role="th">occupation-grouped</th>
<th data-quarto-table-cell-role="th">native_region</th>
<th data-quarto-table-cell-role="th">age_group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>39</td>
<td>government</td>
<td>77516</td>
<td>13</td>
<td>single</td>
<td>single</td>
<td>white</td>
<td>male</td>
<td>2174</td>
<td>0</td>
<td>40</td>
<td>&lt;=50k</td>
<td>tertiary</td>
<td>white collor</td>
<td>north america</td>
<td>36-45</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>50</td>
<td>self-employed</td>
<td>83311</td>
<td>13</td>
<td>married</td>
<td>male spouse</td>
<td>white</td>
<td>male</td>
<td>0</td>
<td>0</td>
<td>13</td>
<td>&lt;=50k</td>
<td>tertiary</td>
<td>white collor</td>
<td>north america</td>
<td>46-60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>38</td>
<td>private</td>
<td>215646</td>
<td>9</td>
<td>divorced or separated</td>
<td>single</td>
<td>white</td>
<td>male</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>&lt;=50k</td>
<td>secondary graduate</td>
<td>blue collor</td>
<td>north america</td>
<td>36-45</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>53</td>
<td>private</td>
<td>234721</td>
<td>7</td>
<td>married</td>
<td>male spouse</td>
<td>black</td>
<td>male</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>&lt;=50k</td>
<td>secondary</td>
<td>blue collor</td>
<td>north america</td>
<td>46-60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>28</td>
<td>private</td>
<td>338409</td>
<td>13</td>
<td>married</td>
<td>female spouse</td>
<td>black</td>
<td>female</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>&lt;=50k</td>
<td>tertiary</td>
<td>white color</td>
<td>central america</td>
<td>26-35</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>37</td>
<td>private</td>
<td>284582</td>
<td>14</td>
<td>married</td>
<td>female spouse</td>
<td>white</td>
<td>female</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>&lt;=50k</td>
<td>tertiary</td>
<td>white collor</td>
<td>north america</td>
<td>36-45</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>49</td>
<td>private</td>
<td>160187</td>
<td>5</td>
<td>divorced or separated</td>
<td>single</td>
<td>black</td>
<td>female</td>
<td>0</td>
<td>0</td>
<td>16</td>
<td>&lt;=50k</td>
<td>secondary</td>
<td>service</td>
<td>central america</td>
<td>46-60</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>52</td>
<td>self-employed</td>
<td>209642</td>
<td>9</td>
<td>married</td>
<td>male spouse</td>
<td>white</td>
<td>male</td>
<td>0</td>
<td>0</td>
<td>45</td>
<td>&gt;50k</td>
<td>secondary graduate</td>
<td>white collor</td>
<td>north america</td>
<td>46-60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>31</td>
<td>private</td>
<td>45781</td>
<td>14</td>
<td>single</td>
<td>single</td>
<td>white</td>
<td>female</td>
<td>14084</td>
<td>0</td>
<td>50</td>
<td>&gt;50k</td>
<td>tertiary</td>
<td>white color</td>
<td>north america</td>
<td>26-35</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>42</td>
<td>private</td>
<td>159449</td>
<td>13</td>
<td>married</td>
<td>male spouse</td>
<td>white</td>
<td>male</td>
<td>5178</td>
<td>0</td>
<td>40</td>
<td>&gt;50k</td>
<td>tertiary</td>
<td>white collor</td>
<td>north america</td>
<td>36-45</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataset-dimensions-and-data-types" class="level2">
<h2 class="anchored" data-anchor-id="dataset-dimensions-and-data-types">Dataset Dimensions and Data Types</h2>
<p>Here, we examine the structure of the dataset:</p>
<ul>
<li>There are <em>32,513</em> entries and <em>16</em> variables.</li>
<li>The dataset includes both <strong>numerical</strong> (e.g., <code>age</code>, <code>hours_per_week</code>) and <strong>categorical</strong> variables (e.g., <code>sex</code>, <code>education_level</code>).</li>
</ul>
<p>Understanding data types and null entries is essential before proceeding with analysis.</p>
<div id="0adbfaab-ff49-422a-8407-18bbca90192d" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>adult_df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>(32533, 16)</code></pre>
</div>
</div>
<div id="478947aa-3baf-4c84-b75e-c84d12de8158" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>adult_df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 32533 entries, 0 to 32532
Data columns (total 16 columns):
 #   Column              Non-Null Count  Dtype 
---  ------              --------------  ----- 
 0   age                 32533 non-null  int64 
 1   workclass           32533 non-null  object
 2   fnlwgt              32533 non-null  int64 
 3   education_num       32533 non-null  int64 
 4   marital_status      32533 non-null  object
 5   relationship        32533 non-null  object
 6   race                32533 non-null  object
 7   sex                 32533 non-null  object
 8   capital_gain        32533 non-null  int64 
 9   capital_loss        32533 non-null  int64 
 10  hours_per_week      32533 non-null  int64 
 11  income              32533 non-null  object
 12  education_level     32533 non-null  object
 13  occupation-grouped  32533 non-null  object
 14  native_region       32533 non-null  object
 15  age_group           32533 non-null  object
dtypes: int64(6), object(10)
memory usage: 4.0+ MB</code></pre>
</div>
</div>
</section>
<section id="summary-statistics" class="level2">
<h2 class="anchored" data-anchor-id="summary-statistics">summary statistics</h2>
<section id="numerical-variables" class="level3">
<h3 class="anchored" data-anchor-id="numerical-variables">Numerical variables</h3>
<div id="6a0095dd-267b-4570-a619-841ffe9ca248" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>adult_df.describe()       <span class="co">#  sumaries the numerical data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">fnlwgt</th>
<th data-quarto-table-cell-role="th">education_num</th>
<th data-quarto-table-cell-role="th">capital_gain</th>
<th data-quarto-table-cell-role="th">capital_loss</th>
<th data-quarto-table-cell-role="th">hours_per_week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>32533.000000</td>
<td>3.253300e+04</td>
<td>32533.000000</td>
<td>32533.000000</td>
<td>32533.000000</td>
<td>32533.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>38.587557</td>
<td>1.897849e+05</td>
<td>10.081640</td>
<td>1078.576338</td>
<td>87.378969</td>
<td>40.441306</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>13.637609</td>
<td>1.055601e+05</td>
<td>2.571689</td>
<td>7388.401928</td>
<td>403.125450</td>
<td>12.346494</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>17.000000</td>
<td>1.228500e+04</td>
<td>1.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>28.000000</td>
<td>1.178330e+05</td>
<td>9.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>40.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>37.000000</td>
<td>1.783560e+05</td>
<td>10.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>40.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>48.000000</td>
<td>2.369930e+05</td>
<td>12.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>45.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>90.000000</td>
<td>1.484705e+06</td>
<td>16.000000</td>
<td>99999.000000</td>
<td>4356.000000</td>
<td>99.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>This summary provides a snapshot of key distribution characteristics. We see that:</p>
<ul>
<li>Age ranges from 17 to 90, with a mean of 38.6 years. It is slightly right-skewed (positively skewed). While the average age is approximately 38.6 years, an examination of the percentiles reveals that the majority of individuals are clustered in the younger to middle-age range, with fewer observations in the older age brackets. This skewed age distribution might suggest labor force participation is concentrated in specific age groups, which could reflect broader demographic or economic realities.</li>
<li>Capital gains/losses are highly skewed, with most values at 0 (the 75th percentile is 0). This indicates that a small number of individuals report very large gains or losses, especially evident in the capital gain variable which reaches up to $99,999. These variables act as proxies for wealth-related income that goes beyond regular wages or salaries. Individuals with non-zero values for capital gains or losses often represent a distinct socioeconomic subset of the population — typically more financially literate, or with access to investment assets. The stark inequality in their distributions mirrors real-world disparities in asset ownership and investment returns.</li>
<li>The dataset has individuals working anywhere from 1 to 99 hours per week, with a median of 40. This aligns with the standard full-time work week in many countries (8 hours per day for 5 working days). The mean is slightly above that at 40.4 hours, suggesting a mild right skew, with a small subset of individuals working significantly longer hours. The mode is also 40, further reinforcing the prevalence of full-time work. A non-trivial number of individuals report working very few hours, possibly due to part-time work, unemployment, or semi-retirement. On the other extreme, some report working more than 45 hours per week, which may indicate multiple jobs, weekend-work, self-employment, or informal labor, and could reflect socioeconomic necessity.</li>
</ul>
</section>
<section id="categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="categorical-variables">Categorical variables</h3>
<div id="f4e7917e-019b-4d6e-96e0-bbdc771b70c7" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>adult_df.describe(include<span class="op">=</span><span class="st">'object'</span>)       </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">workclass</th>
<th data-quarto-table-cell-role="th">marital_status</th>
<th data-quarto-table-cell-role="th">relationship</th>
<th data-quarto-table-cell-role="th">race</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">education_level</th>
<th data-quarto-table-cell-role="th">occupation-grouped</th>
<th data-quarto-table-cell-role="th">native_region</th>
<th data-quarto-table-cell-role="th">age_group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
<td>32533</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">unique</td>
<td>6</td>
<td>4</td>
<td>5</td>
<td>5</td>
<td>2</td>
<td>2</td>
<td>7</td>
<td>9</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">top</td>
<td>private</td>
<td>married</td>
<td>male spouse</td>
<td>white</td>
<td>male</td>
<td>&lt;=50k</td>
<td>secondary graduate</td>
<td>white collor</td>
<td>north america</td>
<td>26-35</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">freq</td>
<td>22670</td>
<td>14993</td>
<td>13187</td>
<td>27791</td>
<td>21774</td>
<td>24694</td>
<td>10494</td>
<td>11480</td>
<td>30037</td>
<td>8510</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="fc7c45ee-d0e6-43e1-9242-f2b5f1784a31" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'workclass'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>workclass
private          0.696831
government       0.133710
self-employed    0.112378
unknown          0.056435
voluntary        0.000430
unemployed       0.000215
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="6de2d626-4e6d-48f1-bd6c-17f5a2c38962" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'marital_status'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>marital_status
married                  0.460855
single                   0.327760
divorced or separated    0.180863
widowed                  0.030523
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="9b8f08f2-73d5-4e57-862b-556a7ee6cc33" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'relationship'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>relationship
male spouse          0.405342
single               0.360680
child                0.155627
female spouse        0.048197
extended relative    0.030154
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="1dfb6298-9f23-41d6-b4dc-552d311b3c8a" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'race'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>race
white                        0.854240
black                        0.095964
asian or pacific islander    0.031906
american indian or eskimo    0.009560
other                        0.008330
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="004f22ee-6d85-471c-b2ef-4dfabc07708b" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'sex'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>sex
male      0.66929
female    0.33071
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="1ab7af3d-cd62-4605-83e7-06127d597848" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'education_level'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>education_level
secondary graduate    0.322565
tertiary              0.247810
unemployed            0.223773
secondary             0.093905
associate             0.075277
primary               0.035134
preschool             0.001537
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="e93530a1-cd80-4205-a982-3abe02f8e1ed" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'occupation-grouped'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>occupation-grouped
white collor    0.352872
blue collar     0.156334
white color     0.127132
service         0.125626
blue collor     0.091169
whitecollar     0.061476
unknown         0.056650
white collar    0.028463
military        0.000277
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="8d5a07e0-3bad-4e4c-812f-90ab30cbd585" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'native_region'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>native_region
north america      0.923278
asia               0.020625
other              0.017890
central america    0.016107
europe             0.016015
south america      0.006086
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<div id="cec02fae-4959-4355-8322-14b0254fa95a" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>adult_df[<span class="st">'age_group'</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>age_group
26-35    0.261581
36-45    0.246058
46-60    0.224111
18-25    0.167553
61-75    0.064273
&lt;18      0.029047
76+      0.007377
Name: proportion, dtype: float64</code></pre>
</div>
</div>
<p><code>workclass</code></p>
<p>The private sector dominates, employing ~69.7% of the population. The government sector (13.4%) and self-employment (11.2%) also make up substantial portions of the workforce. A small fraction is labeled as “unknown” (5.6%), which may correspond to missing or ambiguous data entries. Tiny proportions are voluntary (0.04%) or unemployed (0.02%), possibly underreported or underrepresented in the sample.</p>
<p><code>marital_status</code></p>
<p>Married individuals make up the largest group (46.1%), followed by those who are single (32.8%) and divorced or separated (18.1%). Widowed individuals represent a small minority (~3.1%).</p>
<p><code>relationship</code></p>
<p>The majority are labeled as “male spouse” (40.5%) or “single” (36.1%). Smaller categories include children (15.6%), female spouses (4.8%), and extended relatives (3.0%). The dominance of <code>male spouse</code> reflects the dataset’s gendered structure and may point to traditional family roles. The relative scarcity of “female spouse” roles suggests potential gender imbalances in how income-earning is reported within households.</p>
<p><code>race</code></p>
<p>The dataset is overwhelmingly composed of White individuals (~85.4%). Other racial groups include Black (9.6%), Asian or Pacific Islander (3.2%), American Indian or Eskimo (1.0%), and Other (0.8%). The racial imbalance limits the generalizability of models trained on this data. Smaller racial groups may suffer from limited statistical power, affecting fairness and performance in predictive modeling.</p>
<p><code>sex</code></p>
<p>Males constitute 66.9% of the dataset, with females making up the remaining 33.1%. This male-skewed distribution could be due to sampling (e.g., primary earners in households), workforce participation patterns, or reporting biases.</p>
<p><code>education_level</code></p>
<p>Secondary-school graduates form the largest educational group (~32%), highlighting the central role of high school completion in the labor force. Tertiary education holders — those with university or equivalent degrees — account for nearly 25% of the population, representing a substantial segment with advanced qualifications. A notable 22.4% have attended some college without necessarily earning a degree, suggesting that partial post-secondary education is common, yet may not always translate into formal certification. The remaining 20% are distributed among those with only secondary education (9.4%), associate degrees (7.5%), primary school (3.5%), and a very small group with only preschool education (0.15%). It is ecident that the education distribution is skewed toward mid- to high-level education, with relatively few individuals having only basic schooling. This reflects a dataset that largely captures working-age adults in formal labor, which may underrepresent the least-educated populations.</p>
<p><code>occupation_grouped</code></p>
<p>White-collar occupations are the most prevalent (~51%), followed by blue-collar, service, and unknown. Smaller categories include military, which is marginal. Essentially, slightly over half of individuals in the dataset work in professional, managerial, sales, clerical, or tech-support roles. This suggests the dataset is heavily weighted toward professional and administrative occupations. Nearly a third of the population works in manual labor or skilled trade positions (craft, transport, machine operation, farming, etc.). This indicates a significant segment engaged in physically intensive or technical labor.</p>
<p><code>native_region</code></p>
<p>The vast majority of individuals are from North America (~92.3%). Smaller proportions are from Central America, Asia, Europe, South America, and a generic Other category. The heavy concentration of North American individuals reflects the U.S. focus of the dataset.</p>
<p><code>age_group</code></p>
<p>The largest groups are 26–35 and 36–45, followed by 46–60. These three age groups represent about 73% of the dataset. Very few individuals are under 18 or above 75, consistent with the dataset’s focus on the working-age population.</p>
</section>
</section>
<section id="income-distribution" class="level2">
<h2 class="anchored" data-anchor-id="income-distribution">Income Distribution</h2>
<p>Given that <code>income</code> is the target variable, most of the analysis hereafter will be based on it. We first of all examine the income distribution in the dataset.</p>
<div id="0a11f0b4-c423-4d2d-ab73-63f154b19e14" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>adult_df_income <span class="op">=</span> adult_df.groupby(<span class="st">'income'</span>).size().reset_index(name<span class="op">=</span><span class="st">'total'</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>adult_df_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>&lt;=50k</td>
<td>24694</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>&gt;50k</td>
<td>7839</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ae499d19-2129-4fd7-8e6b-14900deff917" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.pie(adult_df_income, names<span class="op">=</span><span class="st">'income'</span> , values<span class="op">=</span><span class="st">'total'</span>, title<span class="op">=</span><span class="st">'Overall Income Distribution'</span>,color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>])</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">'plotly_dark'</span>,  <span class="co"># Safe background styling</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    paper_bgcolor<span class="op">=</span><span class="st">'black'</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_pie_chart.jpg'</span>))</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_pie_chart.png'</span>))</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_pie_chart.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-57 (run)) Task(Task-944) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
</div>
<div id="aa511075-7f3a-4fe4-acb4-0a6f6d68bcc1" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.pie(adult_df_income, names<span class="op">=</span><span class="st">'income'</span> , values<span class="op">=</span><span class="st">'total'</span>, title<span class="op">=</span><span class="st">'Overall Income Distribution'</span>, color_discrete_sequence<span class="op">=</span>[<span class="st">'red'</span>,<span class="st">'#00D'</span>])</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This pie chart visualizes the overall income split: 76% of individuals earn ≤50K, while 24% earn &gt;50K. This means that nearly 3 out of 4 individuals fall into the lower income bracket (&lt;=50K). This shows that there is a significant imbalance.</p>
<section id="income-by-age-group" class="level3">
<h3 class="anchored" data-anchor-id="income-by-age-group">Income by Age group</h3>
<div id="45888a3e-b5b9-4235-9ab7-67ff879dbb9b" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>adult_df_income_age<span class="op">=</span> adult_df.groupby([<span class="st">'age_group'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_by_age'</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age_group</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total_by_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>18-25</td>
<td>&lt;=50k</td>
<td>5337</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>18-25</td>
<td>&gt;50k</td>
<td>114</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>26-35</td>
<td>&lt;=50k</td>
<td>6919</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>26-35</td>
<td>&gt;50k</td>
<td>1591</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>36-45</td>
<td>&lt;=50k</td>
<td>5233</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>36-45</td>
<td>&gt;50k</td>
<td>2772</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>46-60</td>
<td>&lt;=50k</td>
<td>4480</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>46-60</td>
<td>&gt;50k</td>
<td>2811</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>61-75</td>
<td>&lt;=50k</td>
<td>1580</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>61-75</td>
<td>&gt;50k</td>
<td>511</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>76+</td>
<td>&lt;=50k</td>
<td>200</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>76+</td>
<td>&gt;50k</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>&lt;18</td>
<td>&lt;=50k</td>
<td>945</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="58753490-389c-4d10-8bfa-f064d38178a6" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>adult_df_income_age <span class="op">=</span> adult_df.groupby([<span class="st">'age_group'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_by_age'</span>).sort_values([<span class="st">'age_group'</span>, <span class="st">'income'</span>])</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age_group</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total_by_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>18-25</td>
<td>&lt;=50k</td>
<td>5337</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>18-25</td>
<td>&gt;50k</td>
<td>114</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>26-35</td>
<td>&lt;=50k</td>
<td>6919</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>26-35</td>
<td>&gt;50k</td>
<td>1591</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>36-45</td>
<td>&lt;=50k</td>
<td>5233</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>36-45</td>
<td>&gt;50k</td>
<td>2772</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>46-60</td>
<td>&lt;=50k</td>
<td>4480</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>46-60</td>
<td>&gt;50k</td>
<td>2811</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>61-75</td>
<td>&lt;=50k</td>
<td>1580</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>61-75</td>
<td>&gt;50k</td>
<td>511</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>76+</td>
<td>&lt;=50k</td>
<td>200</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>76+</td>
<td>&gt;50k</td>
<td>40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>&lt;18</td>
<td>&lt;=50k</td>
<td>945</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="b31700da-6a0c-4b6e-b9f0-4816e28bc956" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_age.groupby(<span class="st">'age_group'</span>).size()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>total_per_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>age_group
18-25    2
26-35    2
36-45    2
46-60    2
61-75    2
76+      2
&lt;18      1
dtype: int64</code></pre>
</div>
</div>
<div id="a0bc4375-d6ac-4c8c-b5e1-834ab5c82e4a" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_age.groupby(<span class="st">'age_group'</span>)[<span class="st">'total_by_age'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>total_per_group</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>0     5451
1     5451
2     8510
3     8510
4     8005
5     8005
6     7291
7     7291
8     2091
9     2091
10     240
11     240
12     945
Name: total_by_age, dtype: int64</code></pre>
</div>
</div>
<div id="f4943e17-4a28-4278-96dc-683323b08a05" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_age.groupby(<span class="st">'age_group'</span>)[<span class="st">'total_by_age'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_age[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_age[<span class="st">'total_by_age'</span>]<span class="op">/</span>total_per_group) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>adult_df_income_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">age_group</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total_by_age</th>
<th data-quarto-table-cell-role="th">percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>18-25</td>
<td>&lt;=50k</td>
<td>5337</td>
<td>97.908641</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>18-25</td>
<td>&gt;50k</td>
<td>114</td>
<td>2.091359</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>26-35</td>
<td>&lt;=50k</td>
<td>6919</td>
<td>81.304348</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>26-35</td>
<td>&gt;50k</td>
<td>1591</td>
<td>18.695652</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>36-45</td>
<td>&lt;=50k</td>
<td>5233</td>
<td>65.371643</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>36-45</td>
<td>&gt;50k</td>
<td>2772</td>
<td>34.628357</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>46-60</td>
<td>&lt;=50k</td>
<td>4480</td>
<td>61.445618</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>46-60</td>
<td>&gt;50k</td>
<td>2811</td>
<td>38.554382</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>61-75</td>
<td>&lt;=50k</td>
<td>1580</td>
<td>75.561932</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>61-75</td>
<td>&gt;50k</td>
<td>511</td>
<td>24.438068</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>76+</td>
<td>&lt;=50k</td>
<td>200</td>
<td>83.333333</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>76+</td>
<td>&gt;50k</td>
<td>40</td>
<td>16.666667</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>&lt;18</td>
<td>&lt;=50k</td>
<td>945</td>
<td>100.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="b7d347d5-9d7d-43cb-876d-e3fd0542b3f9" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    adult_df_income_age,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'age_group'</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'percentage'</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="st">'income'</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Incoome Distribution by Age Group(%)'</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate <span class="op">=</span> <span class="st">'Updated %'</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_agegroupchart.jpg'</span>))</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_pie_chart.png'</span>))</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_pie_chart.html'</span>))</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>themes <span class="op">=</span> [<span class="st">"plotly"</span>, <span class="st">"ploty_white"</span>, <span class="st">"plotly_dark"</span>, <span class="st">"ggplot2"</span>,<span class="st">"seasborn"</span>, <span class="st">"simple_white"</span>,<span class="st">"presentation"</span>,<span class="st">"xgridoff"</span>, <span class="st">"gridon"</span>, <span class="st">"none"</span>]</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> theme <span class="kw">in</span> themes:</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(template<span class="op">=</span>theme)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    fig.show() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-65 (run)) Task(Task-1080) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">RuntimeError</span>                              Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[75], line 12</span>
<span class="ansi-green-fg">     10</span> fig<span style="color:rgb(98,98,98)">.</span>update_traces(texttemplate <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">Updated </span><span style="color:rgb(175,0,0)">%</span><span style="color:rgb(175,0,0)">'</span>)
<span class="ansi-green-fg">     11</span> fig<span style="color:rgb(98,98,98)">.</span>show()
<span class="ansi-green-fg ansi-bold">---&gt; 12</span> fig<span style="color:rgb(98,98,98)">.</span>write_image(os<span style="color:rgb(98,98,98)">.</span>path<span style="color:rgb(98,98,98)">.</span>join(result_dir, <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">income_distribution_by_agegroupchart.jpg</span><span style="color:rgb(175,0,0)">'</span>))
<span class="ansi-green-fg">     13</span> fig<span style="color:rgb(98,98,98)">.</span>write_image(os<span style="color:rgb(98,98,98)">.</span>path<span style="color:rgb(98,98,98)">.</span>join(result_dir, <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">income_distribution_pie_chart.png</span><span style="color:rgb(175,0,0)">'</span>))
<span class="ansi-green-fg">     14</span> fig<span style="color:rgb(98,98,98)">.</span>write_image(os<span style="color:rgb(98,98,98)">.</span>path<span style="color:rgb(98,98,98)">.</span>join(result_dir, <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">income_distribution_pie_chart.html</span><span style="color:rgb(175,0,0)">'</span>))

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\plotly\basedatatypes.py:3911</span>, in <span class="ansi-cyan-fg">BaseFigure.write_image</span><span class="ansi-blue-fg ansi-bold">(self, *args, **kwargs)</span>
<span class="ansi-green-fg">   3907</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> kwargs<span style="color:rgb(98,98,98)">.</span>get(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">engine</span><span style="color:rgb(175,0,0)">"</span>, <span style="font-weight:bold;color:rgb(0,135,0)">None</span>):
<span class="ansi-green-fg">   3908</span>         warnings<span style="color:rgb(98,98,98)">.</span>warn(
<span class="ansi-green-fg">   3909</span>             ENGINE_PARAM_DEPRECATION_MSG, <span style="font-weight:bold;color:rgb(215,95,95)">DeprecationWarning</span>, stacklevel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">2</span>
<span class="ansi-green-fg">   3910</span>         )
<span class="ansi-green-fg ansi-bold">-&gt; 3911</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> pio<span style="color:rgb(98,98,98)">.</span>write_image(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\plotly\io\_kaleido.py:509</span>, in <span class="ansi-cyan-fg">write_image</span><span class="ansi-blue-fg ansi-bold">(fig, file, format, scale, width, height, validate, engine)</span>
<span class="ansi-green-fg">    505</span> <span style="color:rgb(0,135,0)">format</span> <span style="color:rgb(98,98,98)">=</span> infer_format(path, <span style="color:rgb(0,135,0)">format</span>)
<span class="ansi-green-fg">    507</span> <span style="font-style:italic;color:rgb(95,135,135)"># Request image</span>
<span class="ansi-green-fg">    508</span> <span style="font-style:italic;color:rgb(95,135,135)"># Do this first so we don't create a file if image conversion fails</span>
<span class="ansi-green-fg ansi-bold">--&gt; 509</span> img_data <span style="color:rgb(98,98,98)">=</span> to_image(
<span class="ansi-green-fg">    510</span>     fig,
<span class="ansi-green-fg">    511</span>     <span style="color:rgb(0,135,0)">format</span><span style="color:rgb(98,98,98)">=</span><span style="color:rgb(0,135,0)">format</span>,
<span class="ansi-green-fg">    512</span>     scale<span style="color:rgb(98,98,98)">=</span>scale,
<span class="ansi-green-fg">    513</span>     width<span style="color:rgb(98,98,98)">=</span>width,
<span class="ansi-green-fg">    514</span>     height<span style="color:rgb(98,98,98)">=</span>height,
<span class="ansi-green-fg">    515</span>     validate<span style="color:rgb(98,98,98)">=</span>validate,
<span class="ansi-green-fg">    516</span>     engine<span style="color:rgb(98,98,98)">=</span>engine,
<span class="ansi-green-fg">    517</span> )
<span class="ansi-green-fg">    519</span> <span style="font-style:italic;color:rgb(95,135,135)"># Open file</span>
<span class="ansi-green-fg">    520</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> path <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    521</span>     <span style="font-style:italic;color:rgb(95,135,135)"># We previously failed to make sense of `file` as a pathlib object.</span>
<span class="ansi-green-fg">    522</span>     <span style="font-style:italic;color:rgb(95,135,135)"># Attempt to write to `file` as an open file descriptor.</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\plotly\io\_kaleido.py:373</span>, in <span class="ansi-cyan-fg">to_image</span><span class="ansi-blue-fg ansi-bold">(fig, format, width, height, scale, validate, engine)</span>
<span class="ansi-green-fg">    369</span> <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">kaleido</span><span style="font-weight:bold;color:rgb(0,0,255)">.</span><span style="font-weight:bold;color:rgb(0,0,255)">errors</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> ChromeNotFoundError
<span class="ansi-green-fg">    371</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    372</span>     <span style="font-style:italic;color:rgb(95,135,135)"># TODO: Refactor to make it possible to use a shared Kaleido instance here</span>
<span class="ansi-green-fg ansi-bold">--&gt; 373</span>     img_bytes <span style="color:rgb(98,98,98)">=</span> kaleido<span style="color:rgb(98,98,98)">.</span>calc_fig_sync(
<span class="ansi-green-fg">    374</span>         fig_dict,
<span class="ansi-green-fg">    375</span>         opts<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(0,135,0)">dict</span>(
<span class="ansi-green-fg">    376</span>             <span style="color:rgb(0,135,0)">format</span><span style="color:rgb(98,98,98)">=</span><span style="color:rgb(0,135,0)">format</span> <span style="font-weight:bold;color:rgb(175,0,255)">or</span> defaults<span style="color:rgb(98,98,98)">.</span>default_format,
<span class="ansi-green-fg">    377</span>             width<span style="color:rgb(98,98,98)">=</span>width <span style="font-weight:bold;color:rgb(175,0,255)">or</span> defaults<span style="color:rgb(98,98,98)">.</span>default_width,
<span class="ansi-green-fg">    378</span>             height<span style="color:rgb(98,98,98)">=</span>height <span style="font-weight:bold;color:rgb(175,0,255)">or</span> defaults<span style="color:rgb(98,98,98)">.</span>default_height,
<span class="ansi-green-fg">    379</span>             scale<span style="color:rgb(98,98,98)">=</span>scale <span style="font-weight:bold;color:rgb(175,0,255)">or</span> defaults<span style="color:rgb(98,98,98)">.</span>default_scale,
<span class="ansi-green-fg">    380</span>         ),
<span class="ansi-green-fg">    381</span>         topojson<span style="color:rgb(98,98,98)">=</span>defaults<span style="color:rgb(98,98,98)">.</span>topojson,
<span class="ansi-green-fg">    382</span>         kopts<span style="color:rgb(98,98,98)">=</span>(
<span class="ansi-green-fg">    383</span>             <span style="color:rgb(0,135,0)">dict</span>(
<span class="ansi-green-fg">    384</span>                 mathjax<span style="color:rgb(98,98,98)">=</span>defaults<span style="color:rgb(98,98,98)">.</span>mathjax,
<span class="ansi-green-fg">    385</span>             )
<span class="ansi-green-fg">    386</span>             <span style="font-weight:bold;color:rgb(0,135,0)">if</span> defaults<span style="color:rgb(98,98,98)">.</span>mathjax
<span class="ansi-green-fg">    387</span>             <span style="font-weight:bold;color:rgb(0,135,0)">else</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    388</span>         ),
<span class="ansi-green-fg">    389</span>     )
<span class="ansi-green-fg">    390</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> ChromeNotFoundError:
<span class="ansi-green-fg">    391</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">RuntimeError</span>(PLOTLY_GET_CHROME_ERROR_MSG)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\__init__.py:145</span>, in <span class="ansi-cyan-fg">calc_fig_sync</span><span class="ansi-blue-fg ansi-bold">(*args, **kwargs)</span>
<span class="ansi-green-fg">    143</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">calc_fig_sync</span>(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">    144</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Call `calc_fig` but blocking."""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 145</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _async_thread_run(calc_fig, args<span style="color:rgb(98,98,98)">=</span>args, kwargs<span style="color:rgb(98,98,98)">=</span>kwargs)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\__init__.py:138</span>, in <span class="ansi-cyan-fg">_async_thread_run</span><span class="ansi-blue-fg ansi-bold">(func, args, kwargs)</span>
<span class="ansi-green-fg">    136</span> res <span style="color:rgb(98,98,98)">=</span> q<span style="color:rgb(98,98,98)">.</span>get()
<span class="ansi-green-fg">    137</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">isinstance</span>(res, <span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span>):
<span class="ansi-green-fg ansi-bold">--&gt; 138</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> res
<span class="ansi-green-fg">    139</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    140</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> res

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\__init__.py:129</span>, in <span class="ansi-cyan-fg">_async_thread_run.&lt;locals&gt;.run</span><span class="ansi-blue-fg ansi-bold">(*args, **kwargs)</span>
<span class="ansi-green-fg">    126</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">run</span>(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs):
<span class="ansi-green-fg">    127</span>     <span style="font-style:italic;color:rgb(95,135,135)"># func is a closure</span>
<span class="ansi-green-fg">    128</span>     <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 129</span>         q<span style="color:rgb(98,98,98)">.</span>put(asyncio<span style="color:rgb(98,98,98)">.</span>run(func(<span style="color:rgb(98,98,98)">*</span>args, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)))
<span class="ansi-green-fg">    130</span>     <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:  <span style="font-style:italic;color:rgb(95,135,135)"># noqa: BLE001</span>
<span class="ansi-green-fg">    131</span>         q<span style="color:rgb(98,98,98)">.</span>put(e)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\asyncio\runners.py:194</span>, in <span class="ansi-cyan-fg">run</span><span class="ansi-blue-fg ansi-bold">(main, debug, loop_factory)</span>
<span class="ansi-green-fg">    190</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">RuntimeError</span>(
<span class="ansi-green-fg">    191</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">asyncio.run() cannot be called from a running event loop</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">    193</span> <span style="font-weight:bold;color:rgb(0,135,0)">with</span> Runner(debug<span style="color:rgb(98,98,98)">=</span>debug, loop_factory<span style="color:rgb(98,98,98)">=</span>loop_factory) <span style="font-weight:bold;color:rgb(0,135,0)">as</span> runner:
<span class="ansi-green-fg ansi-bold">--&gt; 194</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> runner<span style="color:rgb(98,98,98)">.</span>run(main)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\asyncio\runners.py:118</span>, in <span class="ansi-cyan-fg">Runner.run</span><span class="ansi-blue-fg ansi-bold">(self, coro, context)</span>
<span class="ansi-green-fg">    116</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_interrupt_count <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">0</span>
<span class="ansi-green-fg">    117</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 118</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_loop<span style="color:rgb(98,98,98)">.</span>run_until_complete(task)
<span class="ansi-green-fg">    119</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> exceptions<span style="color:rgb(98,98,98)">.</span>CancelledError:
<span class="ansi-green-fg">    120</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_interrupt_count <span style="color:rgb(98,98,98)">&gt;</span> <span style="color:rgb(98,98,98)">0</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\asyncio\base_events.py:687</span>, in <span class="ansi-cyan-fg">BaseEventLoop.run_until_complete</span><span class="ansi-blue-fg ansi-bold">(self, future)</span>
<span class="ansi-green-fg">    684</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> future<span style="color:rgb(98,98,98)">.</span>done():
<span class="ansi-green-fg">    685</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">RuntimeError</span>(<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">Event loop stopped before Future completed.</span><span style="color:rgb(175,0,0)">'</span>)
<span class="ansi-green-fg ansi-bold">--&gt; 687</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> future<span style="color:rgb(98,98,98)">.</span>result()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\__init__.py:54</span>, in <span class="ansi-cyan-fg">calc_fig</span><span class="ansi-blue-fg ansi-bold">(fig, path, opts, topojson, kopts)</span>
<span class="ansi-green-fg">     52</span> kopts <span style="color:rgb(98,98,98)">=</span> kopts <span style="font-weight:bold;color:rgb(175,0,255)">or</span> {}
<span class="ansi-green-fg">     53</span> kopts[<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">n</span><span style="color:rgb(175,0,0)">"</span>] <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">1</span>
<span class="ansi-green-fg ansi-bold">---&gt; 54</span> <span style="font-weight:bold;color:rgb(0,135,0)">async</span> <span style="font-weight:bold;color:rgb(0,135,0)">with</span> Kaleido(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kopts) <span style="font-weight:bold;color:rgb(0,135,0)">as</span> k:
<span class="ansi-green-fg">     55</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="font-weight:bold;color:rgb(0,135,0)">await</span> k<span style="color:rgb(98,98,98)">.</span>calc_fig(
<span class="ansi-green-fg">     56</span>         fig,
<span class="ansi-green-fg">     57</span>         path<span style="color:rgb(98,98,98)">=</span>path,
<span class="ansi-green-fg">     58</span>         opts<span style="color:rgb(98,98,98)">=</span>opts,
<span class="ansi-green-fg">     59</span>         topojson<span style="color:rgb(98,98,98)">=</span>topojson,
<span class="ansi-green-fg">     60</span>     )

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\kaleido.py:76</span>, in <span class="ansi-cyan-fg">Kaleido.__aexit__</span><span class="ansi-blue-fg ansi-bold">(self, exc_type, exc_value, exc_tb)</span>
<span class="ansi-green-fg">     74</span> <span style="font-weight:bold;color:rgb(0,135,0)">await</span> asyncio<span style="color:rgb(98,98,98)">.</span>gather(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_background_render_tasks, return_exceptions<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">True</span>)
<span class="ansi-green-fg">     75</span> _logger<span style="color:rgb(98,98,98)">.</span>info(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Exiting Kaleido</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg ansi-bold">---&gt; 76</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="font-weight:bold;color:rgb(0,135,0)">await</span> <span style="color:rgb(0,135,0)">super</span>()<span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,255)">__aexit__</span>(exc_type, exc_value, exc_tb)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\choreographer\browser_async.py:249</span>, in <span class="ansi-cyan-fg">Browser.__aexit__</span><span class="ansi-blue-fg ansi-bold">(self, type_, value, traceback)</span>
<span class="ansi-green-fg">    242</span> <span style="font-weight:bold;color:rgb(0,135,0)">async</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">__aexit__</span>(
<span class="ansi-green-fg">    243</span>     <span style="color:rgb(0,135,0)">self</span>,
<span class="ansi-green-fg">    244</span>     type_: <span style="color:rgb(0,135,0)">type</span>[<span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span>] <span style="color:rgb(98,98,98)">|</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg">    245</span>     value: <span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span> <span style="color:rgb(98,98,98)">|</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg">    246</span>     traceback: TracebackType <span style="color:rgb(98,98,98)">|</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg">    247</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:  <span style="font-style:italic;color:rgb(95,135,135)"># None instead of False is fine, eases type checking</span>
<span class="ansi-green-fg">    248</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Close the browser."""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 249</span>     <span style="font-weight:bold;color:rgb(0,135,0)">await</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>close()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\kaleido\kaleido.py:69</span>, in <span class="ansi-cyan-fg">Kaleido.close</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">     67</span>         task<span style="color:rgb(98,98,98)">.</span>cancel()
<span class="ansi-green-fg">     68</span> _logger<span style="color:rgb(98,98,98)">.</span>info(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Exiting Kaleido/Choreo</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg ansi-bold">---&gt; 69</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="font-weight:bold;color:rgb(0,135,0)">await</span> <span style="color:rgb(0,135,0)">super</span>()<span style="color:rgb(98,98,98)">.</span>close()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\choreographer\browser_async.py:228</span>, in <span class="ansi-cyan-fg">Browser.close</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    226</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    227</span>     _logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Starting browser close methods.</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg ansi-bold">--&gt; 228</span>     <span style="font-weight:bold;color:rgb(0,135,0)">await</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_close()
<span class="ansi-green-fg">    229</span>     _logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Browser close methods finished.</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">    230</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">ProcessLookupError</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\choreographer\browser_async.py:216</span>, in <span class="ansi-cyan-fg">Browser._close</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    214</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span>
<span class="ansi-green-fg">    215</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 216</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">RuntimeError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Couldn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t close or kill browser subprocess</span><span style="color:rgb(175,0,0)">"</span>)

<span class="ansi-red-fg ansi-bold">RuntimeError</span>: Couldn't close or kill browser subprocess</pre>
</div>
</div>
</div>
<div id="b64f4900-8a9f-413c-b1c4-3866ef65b165" class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>pip install <span class="op">-</span>U kaleido</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="11bd8c54-274e-4842-b368-9df1fdb43416" class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>pip install <span class="op">-</span>U plotly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="08361d58-5289-41aa-a029-a86fc45ab385" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>adult_df_income_native_region <span class="op">=</span> adult_df.groupby([<span class="st">'native_region'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_income_distr'</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_native_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">native_region</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total_income_distr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>asia</td>
<td>&lt;=50k</td>
<td>465</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>asia</td>
<td>&gt;50k</td>
<td>206</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>central america</td>
<td>&lt;=50k</td>
<td>466</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>central america</td>
<td>&gt;50k</td>
<td>58</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>europe</td>
<td>&lt;=50k</td>
<td>369</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>europe</td>
<td>&gt;50k</td>
<td>152</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>north america</td>
<td>&lt;=50k</td>
<td>22784</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>north america</td>
<td>&gt;50k</td>
<td>7253</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>other</td>
<td>&lt;=50k</td>
<td>436</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>other</td>
<td>&gt;50k</td>
<td>146</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>south america</td>
<td>&lt;=50k</td>
<td>174</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>south america</td>
<td>&gt;50k</td>
<td>24</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ab295eee-13e1-4d63-af51-41a94d999435" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>total_per_region <span class="op">=</span> adult_df_income_native_region.groupby(<span class="st">'native_region'</span>)[<span class="st">'total_income_distr'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_native_region[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_native_region[<span class="st">'total_income_distr'</span>]<span class="op">/</span>total_per_region) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>adult_df_income_native_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">native_region</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">total_income_distr</th>
<th data-quarto-table-cell-role="th">percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>asia</td>
<td>&lt;=50k</td>
<td>465</td>
<td>69.299553</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>asia</td>
<td>&gt;50k</td>
<td>206</td>
<td>30.700447</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>central america</td>
<td>&lt;=50k</td>
<td>466</td>
<td>88.931298</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>central america</td>
<td>&gt;50k</td>
<td>58</td>
<td>11.068702</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>europe</td>
<td>&lt;=50k</td>
<td>369</td>
<td>70.825336</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>europe</td>
<td>&gt;50k</td>
<td>152</td>
<td>29.174664</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>north america</td>
<td>&lt;=50k</td>
<td>22784</td>
<td>75.853114</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>north america</td>
<td>&gt;50k</td>
<td>7253</td>
<td>24.146886</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>other</td>
<td>&lt;=50k</td>
<td>436</td>
<td>74.914089</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>other</td>
<td>&gt;50k</td>
<td>146</td>
<td>25.085911</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>south america</td>
<td>&lt;=50k</td>
<td>174</td>
<td>87.878788</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>south america</td>
<td>&gt;50k</td>
<td>24</td>
<td>12.121212</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="f8c515f0-855a-484c-9016-cb65f2325b2e" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    adult_df_income_native_region,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'native_region'</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'percentage'</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="st">'income'</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Income Distribution by native_region(%)'</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate <span class="op">=</span> <span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_nativeregion_bar_plot.jpg'</span>))</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_nativeregion_bar_plot.png'</span>))</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_nativeregion_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-31-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-71 (run)) Task(Task-1199) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
</div>
<p>Asia (30.7%) and Europe (29.2%) have the highest proportions of high-income earners. This suggests these immigrant groups might be better integrated into high-paying professional roles, or may represent a more skilled migrant profile in the dataset. Central America (11.1%) and South America (12.1%) have the lowest proportions of &gt;50K earners. With 24.2% of North Americans earning &gt;50K, this serves as a middle-ground baseline. Interestingly, both Asian and European groups outperform the native-born population proportionally in high-income brackets. The ‘Other’ group sits around 25.1%, close to North America’s rate. This likely reflects a diverse mix of regions not explicitly listed.</p>
<div id="728ac3f9-08e4-4b01-8ff9-15c3e3c9388e" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    adult_df_income_age,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="st">'age_group'</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="st">'percentage'</span>,</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="st">'income'</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Incoome Distribution by Age Group(%)'</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate <span class="op">=</span> <span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_agegroup_bar_plot.jpg'</span>))</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_agegroup_bar_plot.png'</span>))</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_agegroup_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-32-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-75 (run)) Task(Task-1275) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
</div>
<div id="3038639d-097d-4d77-aa06-04964882c7ab" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by native_region and income, count occurrences</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg <span class="op">=</span> adult_df.groupby([<span class="st">'native_region'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_income_reg'</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total per native_region</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_reg.groupby(<span class="st">'native_region'</span>)[<span class="st">'total_income_reg'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_reg[<span class="st">'total_income_reg'</span>] <span class="op">/</span> total_per_group) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the bar chart</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    adult_df_income_reg,</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'native_region'</span>,</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'percentage'</span>,</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'income'</span>,</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Income Distribution by Native Region (%)'</span>,</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the text on bars</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate<span class="op">=</span><span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>, textposition<span class="op">=</span><span class="st">'outside'</span>)</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.jpg'</span>))</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.png'</span>))</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="874a8e2a-05b1-4a61-9274-cdff293c5982" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by native_region and income, count occurrences</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg <span class="op">=</span> adult_df.groupby([<span class="st">'native_region'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_income_reg'</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total per native_region</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_reg.groupby(<span class="st">'native_region'</span>)[<span class="st">'total_income_reg'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_reg[<span class="st">'total_income_reg'</span>] <span class="op">/</span> total_per_group) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the bar chart</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    adult_df_income_reg,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'native_region'</span>,</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'percentage'</span>,</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'income'</span>,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Income Distribution by Native Region (%)'</span>,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the text on bars</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate<span class="op">=</span><span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>, textposition<span class="op">=</span><span class="st">'outside'</span>)</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.jpg'</span>))</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.png'</span>))</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-34-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="5cbcb8bf-499d-4085-b51d-7990fe0b1120" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by native_region and income, count occurrences</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg <span class="op">=</span> adult_df.groupby([<span class="st">'race'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_income_reg'</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total per native_region</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_reg.groupby(<span class="st">'race'</span>)[<span class="st">'total_income_reg'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_reg[<span class="st">'total_income_reg'</span>] <span class="op">/</span> total_per_group) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the bar chart</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    adult_df_income_reg,</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'race'</span>,</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'percentage'</span>,</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'income'</span>,</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Income Distribution by Race (%)'</span>,</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the text on bars</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate<span class="op">=</span><span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>, textposition<span class="op">=</span><span class="st">'outside'</span>)</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.jpg'</span>))</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.png'</span>))</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-83 (run)) Task(Task-1435) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
</div>
<div id="f3530e38-d86a-407a-a081-5b3382c08935" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by native_region and income, count occurrences</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg <span class="op">=</span> adult_df.groupby([<span class="st">'race'</span>, <span class="st">'income'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total_income_reg'</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate total per native_region</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>total_per_group <span class="op">=</span> adult_df_income_reg.groupby(<span class="st">'race'</span>)[<span class="st">'total_income_reg'</span>].transform(<span class="st">'sum'</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percentage</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>adult_df_income_reg[<span class="st">'percentage'</span>] <span class="op">=</span> (adult_df_income_reg[<span class="st">'total_income_reg'</span>] <span class="op">/</span> total_per_group) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the bar chart</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    adult_df_income_reg,</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'race'</span>,</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'percentage'</span>,</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'income'</span>,</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Income Distribution by Race (%)'</span>,</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    barmode<span class="op">=</span><span class="st">'group'</span>,</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>[<span class="st">'#0d2e03'</span>, <span class="st">'#56b33a'</span>],</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    text<span class="op">=</span><span class="st">'percentage'</span></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Format the text on bars</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>fig.update_traces(texttemplate<span class="op">=</span><span class="st">'%</span><span class="sc">{text:.2f}</span><span class="st">%'</span>, textposition<span class="op">=</span><span class="st">'outside'</span>)</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(template<span class="op">=</span><span class="st">'presentation'</span>, paper_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>, plot_bgcolor<span class="op">=</span><span class="st">'rgb(0, 0, 0)'</span>)</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.jpg'</span>))</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>fig.write_image(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.png'</span>))</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>fig.write_html(os.path.join(result_dir, <span class="st">'income_distribution_by_race_bar_plot.html'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Data%20Analysis_files/figure-html/cell-36-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>WARNING Thread(Thread-83 (run)) Task(Task-1435) choreographer.browser_async:browser_async.py:_close()- Resorting to unclean kill browser.</code></pre>
</div>
</div>
<div id="56eeff8b-3d9d-4a6b-b4bf-8dc946208239" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>adult_df_income_edu_occ <span class="op">=</span> adult_df.groupby([<span class="st">'education_level'</span>, <span class="st">'income'</span>,<span class="st">'occupation-grouped'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'total'</span>).sort_values(<span class="st">'total'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>adult_df_income_edu_occ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">education_level</th>
<th data-quarto-table-cell-role="th">income</th>
<th data-quarto-table-cell-role="th">occupation-grouped</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">60</td>
<td>secondary graduate</td>
<td>&lt;=50k</td>
<td>white collor</td>
<td>2617</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">95</td>
<td>unemployed</td>
<td>&lt;=50k</td>
<td>white collor</td>
<td>2497</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>secondary graduate</td>
<td>&lt;=50k</td>
<td>blue collar</td>
<td>1871</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">86</td>
<td>tertiary</td>
<td>&gt;50k</td>
<td>white collor</td>
<td>1865</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">77</td>
<td>tertiary</td>
<td>&lt;=50k</td>
<td>white collor</td>
<td>1667</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>secondary</td>
<td>&lt;=50k</td>
<td>military</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">33</td>
<td>primary</td>
<td>&gt;50k</td>
<td>service</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">21</td>
<td>preschool</td>
<td>&lt;=50k</td>
<td>white color</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">82</td>
<td>tertiary</td>
<td>&gt;50k</td>
<td>military</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>tertiary</td>
<td>&lt;=50k</td>
<td>military</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>106 rows × 4 columns</p>
</div>
</div>
</div>
<div id="07caec4d-2d1c-4985-9487-db0cc6f49802" class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>final_file <span class="op">=</span> os.path.join(processed_dir, <span class="st">'adult_cleaned.csv'</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>adult_df.to_csv(final_file, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>